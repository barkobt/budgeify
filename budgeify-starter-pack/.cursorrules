---
description: Budgeify - Kişisel Finans Yönetimi Uygulaması
alwaysApply: true
---

## Project Context: Budgeify
- **Core Identity:** Budgeify is a modern, minimalist financial management app with a "glassmorphism" aesthetic.
- **Stack:** Next.js 14 (App Router) + TypeScript + Tailwind CSS + Zustand
- **Design Guidelines:** Strictly follow the provided UI reference. Use rounded corners (16px-20px), soft shadows, and specific blue/teal gradients (#1E40AF to #3B82F6).
- **Smart Logic:** Implement the "Smart Autocomplete" for expenses with emojis and predictive filtering as defined in the PRD.
- **Data Persistence:** Use LocalStorage (MVP) following the 'AppState' JSON schema strictly. Do not deviate from the TypeScript interfaces in 'src/types'.
- **Language:** Turkish (UI, ₺ currency), English (code)

> **Instruction:** Always refer to `PRD.md` for feature logic and use the UI Screenshot as the ultimate source of truth for visual styling.

---

## Code Style and Structure

### General Principles
- Write concise, technical TypeScript code with accurate examples
- Use functional and declarative programming patterns; avoid classes
- Favor iteration and modularization over code duplication
- TypeScript strict mode, no `any` type
- Named exports for components, default export for pages
- Comments in Turkish where helpful

### Naming Conventions
- Components: `PascalCase.tsx` (e.g., `MainBalanceCard.tsx`)
- Utilities: `camelCase.ts` (e.g., `formatCurrency.ts`)
- Stores: `camelCase.ts` with "Store" suffix (e.g., `incomeStore.ts`)
- Types: `camelCase.ts` or in component file
- Directories: lowercase with dashes (e.g., `components/auth-wizard`)
- Variables: descriptive with auxiliary verbs (e.g., `isLoading`, `hasError`)

### Folder Structure
```
src/
├── app/                    # Next.js App Router pages
├── components/
│   ├── ui/                 # Reusable UI (Button, Card, Input)
│   ├── features/           # Feature-specific (IncomeCard, ExpenseForm)
│   └── layout/             # Layout (Header, BottomNav, Sidebar)
├── stores/                 # Zustand stores
├── services/               # Business logic, API calls
├── types/                  # TypeScript type definitions
├── utils/                  # Helper functions
├── hooks/                  # Custom React hooks
└── constants/              # Constants, config
```

---

## Optimization and Best Practices

- Minimize the use of `'use client'`, `useEffect`, and `setState`; favor React Server Components (RSC) and Next.js SSR features
- Implement dynamic imports for code splitting and optimization
- Use responsive design with a mobile-first approach
- Optimize images: use WebP format, include size data, implement lazy loading

### Error Handling and Validation
- Prioritize error handling and edge cases
- Use early returns for error conditions
- Implement guard clauses to handle preconditions and invalid states early
- Use custom error types for consistent error handling
- Implement validation using Zod for schema validation

---

## UI/Styling Rules

### Design System (Reference Image Based)
```css
/* Colors */
--primary: #1E40AF (blue-700)
--primary-light: #3B82F6 (blue-500)
--accent: #14B8A6 (teal-500)
--success: #22C55E (green-500)
--warning: #F59E0B (amber-500)
--error: #EF4444 (red-500)
--background: #F8FAFC (slate-50)
--card: #FFFFFF with glassmorphism

/* Spacing */
--radius-sm: 8px (rounded-lg)
--radius-md: 12px (rounded-xl)
--radius-lg: 16px (rounded-2xl)
--radius-full: 9999px (rounded-full)
```

### Component Styling
- **Cards:** `rounded-2xl bg-white/80 backdrop-blur-md shadow-xl shadow-black/5 border border-white/20`
- **Gradient Cards:** `bg-gradient-to-br from-blue-600 to-cyan-500 text-white`
- **Buttons Primary:** `bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-6 py-3`
- **Buttons Ghost:** `bg-transparent hover:bg-slate-100 text-slate-700 rounded-xl`
- **Inputs:** `rounded-xl border-slate-200 focus:border-blue-500 focus:ring-blue-500/20`

### Responsive & Animation
- Mobile first approach: `sm:` 640px, `md:` 768px, `lg:` 1024px, `xl:` 1280px
- Touch targets minimum 44px
- Use Framer Motion for page transitions
- Subtle hover effects: `transition-all duration-200`
- No jarring animations

---

## State Management (Zustand)

### Store Pattern
```typescript
// stores/incomeStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface IncomeState {
  incomes: Income[];
  addIncome: (income: Income) => void;
  // ...
}

export const useIncomeStore = create<IncomeState>()(
  persist(
    (set) => ({
      incomes: [],
      addIncome: (income) => set((state) => ({ 
        incomes: [...state.incomes, income] 
      })),
    }),
    { name: 'budgeify-income' }
  )
);
```

---

## Git Commit Rules

### Conventional Commits
```
feat(scope): add new feature
fix(scope): fix bug
style(scope): UI/styling changes (no logic change)
refactor(scope): code refactoring
docs(scope): documentation
chore(scope): maintenance tasks
```

### Scopes
`ui` | `income` | `expense` | `analytics` | `goals` | `layout` | `store` | `utils`

### Examples
```
feat(ui): add GlassCard component with blur effect
feat(expense): implement category autocomplete dropdown
fix(income): correct percentage calculation for additional income
style(layout): adjust bottom nav spacing for mobile
refactor(store): migrate income store to persist middleware
```

---

## Development Workflow

### Token Koruma Protokolü (Token Protection Protocol)
- Session token limit maximum: **%100**
- **CRITICAL**: When token usage reaches **%90**, immediately STOP execution
- Do NOT continue with new tasks when limit approaches
- Save all progress before stopping

### Otomatik Senkronizasyon (Automatic Synchronization)
- After every successful task completion OR when stopping due to token limit
- Automatically update `CLAUDE.md` and `TASKS.md` with:
  - Current progress status
  - Completed/in-progress/blocked tasks
  - Latest file modifications
  - Current session notes

### Git Otomasyonu (Git Automation)
- After each milestone (task block) completion:
  - Commit changes using CLAUDE.md Conventional Commits standard
  - Push to GitHub using: `git push origin main`
  - Use descriptive commit messages following format: `feat(scope): description`

### Devir Teslim (Handover Documentation)
- When stopping due to token limit or session end:
  - Add "Token Limit Summary" section to `CLAUDE.md`
  - Document: What was completed, what's pending, next exact steps
  - Include any blocking issues or dependencies
  - Ensure next session can resume immediately without context loss

### After Each Task
1. Ensure code compiles: `npm run build`
2. Check for TypeScript errors
3. Verify in browser (dev server should be running)
4. Commit with conventional message
5. Update progress in CLAUDE.md synchronously

### Preview Requirement
- Dev server must always be running (`npm run dev`)
- After each task completion, verify the change is visible in browser
- Provide localhost URL (http://localhost:3000)
- Take mental note of any visual regressions

---

## Methodology

1. **System 2 Thinking**: Approach the problem with analytical rigor. Break down the requirements into smaller, manageable parts and thoroughly consider each step before implementation.
2. **Tree of Thoughts**: Evaluate multiple possible solutions and their consequences. Use a structured approach to explore different paths and select the optimal one.
3. **Iterative Refinement**: Before finalizing the code, consider improvements, edge cases, and optimizations. Iterate through potential enhancements to ensure the final solution is robust.

### Process
1. **Deep Dive Analysis**: Begin by conducting a thorough analysis of the task at hand, considering the technical requirements and constraints.
2. **Planning**: Develop a clear plan that outlines the architectural structure and flow of the solution.
3. **Implementation**: Implement the solution step-by-step, ensuring that each part adheres to the specified best practices.
4. **Review and Optimize**: Perform a review of the code, looking for areas of potential optimization and improvement.
5. **Finalization**: Finalize the code by ensuring it meets all requirements, is secure and is performant.

---

## Testing and Documentation

- Write unit tests for components using Jest and React Testing Library
- Provide clear and concise comments for complex logic
- Use JSDoc comments for functions and components to improve IDE intellisense

---

## Important Reminders

### Do's ✅
- Follow the UI reference image aesthetic
- Use Tailwind classes, not inline styles
- Keep components small and focused (<200 lines)
- Add proper TypeScript types
- Use semantic HTML elements
- Test on mobile viewport first

### Don'ts ❌
- Don't use `any` type
- Don't hardcode colors (use Tailwind classes)
- Don't skip TypeScript errors
- Don't create god components (>200 lines)
- Don't use CSS modules or styled-components
- Don't commit broken code
