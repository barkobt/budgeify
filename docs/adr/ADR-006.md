# ADR-006: Sentry-Ready Error Reporting Abstraction

**Status:** Accepted
**Date:** 2026-02-06
**Context:** Error handling was scattered across logger.error calls with no structured capture, breadcrumbs, or external service integration point.

**Decision:** Create `src/lib/error-reporting.ts` as a pluggable error reporting layer:
- `reportError()` normalizes unknown catch errors into structured Error objects with context
- `registerReporter()` allows plugging in Sentry (or any APM) with zero refactoring
- `addBreadcrumb()` / `getBreadcrumbs()` for debugging context trail
- `setUser()` / `getUser()` for user-scoped error tracking
- Falls back to centralized logger when no external reporter is registered
- ErrorBoundary uses `reportError` + `addBreadcrumb` for fatal React errors
- All server actions and form components route through `reportError`

**Integration Example:**
```typescript
import * as Sentry from '@sentry/nextjs';
import { registerReporter } from '@/lib/error-reporting';

registerReporter((error, ctx) => {
  Sentry.captureException(error, {
    tags: ctx.tags,
    extra: ctx.extra,
    level: ctx.level,
  });
});
```

**Consequences:**
- Single integration point for any error tracking service
- Structured error context across all catch blocks
- Zero-cost abstraction: works fully without Sentry
- Breadcrumb trail available for debugging production issues
